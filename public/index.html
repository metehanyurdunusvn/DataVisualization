<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Viewer | Çelebi</title>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Icons (Phosphor Icons - cleaner than FontAwesome) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar: Plane Selector -->
        <aside class="sidebar">
            <div class="brand">
                <i class="ph ph-airplane-tilt"></i>
                <span>ÇelebiLogViewer</span>
            </div>
            <div class="search-box">
                <div class="search-input-wrapper">
                    <i class="ph ph-magnifying-glass"></i>
                    <input type="text" id="id-filter" placeholder="Filter IDs...">
                </div>
                <button id="btn-compare-mode" class="btn-icon" title="Toggle Compare Mode">
                    <i class="ph ph-arrows-left-right"></i>
                    <span>Compare</span>
                </button>
                <button id="btn-3d-mode" class="btn-icon" title="Switch to 3D Mode"
                    onclick="window.location.href='viewer3d.html'">
                    <i class="ph ph-cube"></i>
                    <span>3D View</span>
                </button>
                <button id="btn-settings" class="btn-icon" title="Settings">
                    <i class="ph ph-gear"></i>
                    <span>Settings</span>
                </button>
            </div>
            <div class="id-list" id="plane-list">
                <!-- Items injected by JS -->
                <div class="loading-spinner"></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-view">
            <!-- Map Container -->
            <div id="map"></div>

            <!-- Settings Modal -->
            <div id="settings-modal" class="modal-overlay hidden">
                <div class="modal-content glass">
                    <div class="modal-header">
                        <h2>Settings</h2>
                        <button id="btn-close-settings" class="btn-icon"><i class="ph ph-x"></i></button>
                    </div>
                    <div class="modal-body">
                        <div class="setting-group">
                            <label>Primary Plane Color</label>
                            <input type="color" id="set-primary-color" value="#ff0000">
                        </div>
                        <div class="setting-group">
                            <label>Secondary Plane Color</label>
                            <input type="color" id="set-secondary-color" value="#faa200">
                        </div>
                        <div class="setting-group">
                            <label>Primary Path Color</label>
                            <input type="color" id="set-primary-path-color" value="#00f2ff">
                        </div>
                        <div class="setting-group">
                            <label>Secondary Path Color</label>
                            <input type="color" id="set-secondary-path-color" value="#00ff00">
                        </div>
                        <div class="setting-group">
                            <label>Boundary Line Color</label>
                            <input type="color" id="set-boundary-color" value="#ff0000">
                        </div>
                        <div class="setting-group">
                            <label>Boundary Fill Color</label>
                            <input type="color" id="set-fill-color" value="#3700ff">
                        </div>
                        <div class="setting-group">
                            <label>Boundary Opacity</label>
                            <input type="range" id="set-fill-opacity" min="0" max="1" step="0.1" value="0.2">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="btn-reset-settings" class="btn-text">Reset Defaults</button>
                    </div>
                </div>
            </div>

            <!-- Secondary HUD (Top Left) - Hidden by default -->
            <div class="hud-panel top-left glass hidden" id="hud-secondary">
                <div class="hud-header">
                    <span id="sec-plane-label" style="color: #ffd700;">SECONDARY</span>
                </div>
                <div class="hud-grid">
                    <div class="hud-item">
                        <span class="label">ALT</span>
                        <span class="value" id="sec-alt">--</span>
                    </div>
                    <div class="hud-item">
                        <span class="label">SPD</span>
                        <span class="value" id="sec-speed">--</span>
                    </div>
                    <div class="hud-item wide">
                        <span class="label">DST</span> <!-- Distance to primary -->
                        <span class="value-sm" id="sec-dist">-- m</span>
                    </div>
                    <div class="hud-item wide checkbox-row">
                        <label class="checkbox-container small">
                            <input type="checkbox" id="chk-sec-path">
                            <span class="checkmark"></span>
                            Show Path
                        </label>
                    </div>
                </div>
            </div>

            <!-- HUD Overlay: Telemetry -->
            <div class="hud-panel top-right glass">
                <div class="hud-header">
                    <span id="active-plane-label">NO SELECTION</span>
                    <span class="live-badge">LIVE REPLAY</span>
                </div>
                <div class="hud-grid">
                    <div class="hud-item">
                        <span class="label">ALTITUDE</span>
                        <span class="value" id="val-alt">--</span>
                        <span class="unit">m</span>
                    </div>
                    <div class="hud-item">
                        <span class="label">SPEED</span>
                        <span class="value" id="val-speed">--</span>
                        <span class="unit">m/s</span>
                    </div>
                    <div class="hud-item">
                        <span class="label">HEADING</span>
                        <span class="value" id="val-heading">--</span>
                        <span class="unit">deg</span>
                    </div>
                    <div class="hud-item">
                        <span class="label">BATTERY</span>
                        <span class="value" id="val-batt">--</span>
                        <span class="unit">%</span>
                    </div>
                    <div class="hud-item wide">
                        <span class="label">LAT / LON</span>
                        <span class="value-sm" id="val-latlon">-- / --</span>
                    </div>
                    <div class="hud-item wide">
                        <span class="label">TIMESTAMP</span>
                        <span class="value-sm" id="val-time">--</span>
                    </div>
                </div>
            </div>

            <!-- HUD Overlay: Controls -->
            <div class="hud-panel bottom-center glass">
                <div class="timeline-container">
                    <input type="range" id="timeline" min="0" max="100" value="0" step="1">
                </div>
                <div class="controls-row">
                    <div class="options-controls">
                        <label class="checkbox-container">
                            <input type="checkbox" id="chk-full-path">
                            <span class="checkmark"></span>
                            Show Full Path
                        </label>
                    </div>
                    <div class="speed-controls" style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 0.8rem; color: var(--text-muted); width: 40px;"
                            id="speed-val">1.0x</span>
                        <input type="range" id="speed-slider" min="0.1" max="10" step="0.1" value="1"
                            style="width: 100px;">
                    </div>
                    <div class="playback-controls">
                        <button class="btn-round" id="btn-play-pause">
                            <i class="ph-fill ph-play" id="icon-play"></i>
                            <i class="ph-fill ph-pause hidden" id="icon-pause"></i>
                        </button>
                    </div>
                    <div class="index-display">
                        <span id="frame-idx">0</span> / <span id="frame-total">0</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="settings.js"></script>
    <script src="app.js"></script>
</body>

</html>